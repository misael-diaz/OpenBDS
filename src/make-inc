#
# OpenBDS						July 19, 2023
#
# source: make-inc
# author: @misael-diaz
#
# Synopsis:
# Defines the include file for building the program with GNU make.
#
# Copyright (c) 2023 Misael Diaz-Maldonado
# This file is released under the GNU General Public License as published
# by the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#

# FORTRAN compiler
FC = gfortran-10
FC = gfortran

# clang compiler
CC = gcc-10
CC = gcc

FCOPT = -O2 -mavx512vnni -ftree-vectorize -fopt-info-optimized=opts.log -cpp -ffree-form\
	-ffree-line-length-none
FCOPT = -O2 -mavx -ftree-vectorize -fopt-info-optimized=opts.log -cpp -ffree-form\
	-ffree-line-length-none
FCOPT = -g -Wall -Wextra -Waliasing -Wsurprising -Warray-bounds -Warray-temporaries\
	-Wcharacter-truncation -Wconversion-extra -Wimplicit-interface\
	-Wimplicit-procedure -Wuse-without-only -Wrealloc-lhs -Wrealloc-lhs-all\
	-fcheck=all -O0 -cpp -ffree-form -ffree-line-length-none

# clang options
CCOPT = -std=gnu2x -O2 -mavx512vnni -ftree-vectorize -fopt-info-optimized=opts.log
CCOPT = -std=gnu2x -O2 -mavx2 -ftree-vectorize -fopt-info-optimized=opts.log
CCOPT = -std=gnu2x -g -Wall -Wextra -O0

# libraries
# if the glibc version is older than 2.17, you will need these libraries
LIBS = -lm -lrt
# otherwise just link against C's math library
LIBS = -lm

# headers
SYSTEM_H = system.h
SPHERE_H = sphere.h
UTIL_H = util.h
FMACROS_H = fmacros.h

# sources
MAIN_SRC = main.f
TEST_SRC = test.c
UTIL_SRC = util.c
SPHERE_SRC = sphere.c

# objects
MAIN_OBJ = main.o
TEST_OBJ = test.o
UTIL_OBJ = util.o
SPHERE_OBJ = sphere.o

# binaries
TEST_BIN = test.bin
MAIN_BIN = OpenBDS.bin

TESTS = $(MAIN_BIN) $(TEST_BIN)
